!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ParrotRcTransitionGroup={},e.React)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=n(t);function i(e,n){let r=Object.create(null);return e&&t.Children.map(e,(e=>e)).forEach((e=>{r[e.key]=(e=>n&&t.isValidElement(e)?n(e):e)(e)})),r}function l(e,t,n){return null!=n[t]?n[t]:e.props[t]}function u(e,n,r){let u=i(e.children),o=function(e={},t={}){function n(n){return n in t?t[n]:e[n]}let r,i=Object.create(null),l=[];for(let n in e)n in t?l.length&&(i[n]=l,l=[]):l.push(n);let u={};for(let e in t){if(i[e])for(r=0;r<i[e].length;r++){let t=i[e][r];u[i[e][r]]=n(t)}u[e]=n(e)}for(r=0;r<l.length;r++)u[l[r]]=n(l[r]);return u}(n,u);return Object.keys(o).forEach((i=>{let c=o[i];if(!t.isValidElement(c))return;const f=i in n,s=i in u,a=n[i],d=t.isValidElement(a)&&!a.props.visible;!s||f&&!d?s||!f||d?s&&f&&t.isValidElement(a)&&(o[i]=t.cloneElement(c,{onExited:r.bind(null,c),visible:a.props.visible,exit:l(c,"exit",e),enter:l(c,"enter",e)})):o[i]=t.cloneElement(c,{visible:!1}):o[i]=t.cloneElement(c,{onExited:r.bind(null,c),visible:!0,exit:l(c,"exit",e),enter:l(c,"enter",e)})})),o}var o=r.default.forwardRef(((e,n)=>{const{component:o="div",children:c}=e,f=t.useRef(!1),s=t.useRef(!0),[a,d]=t.useState({}),p=t.useRef(null),b=t.useCallback(((e,t)=>{let n=i(p.current);e.key in n||(e.props.onExited&&e.props.onExited(t),f.current&&d((t=>{let n=Object.assign({},t);return delete n[e.key],n})))}),[p.current,f.current]);t.useEffect((()=>{p.current=e.children}),[e]),t.useEffect((()=>(f.current=!0,s.current?(d(function(e,n){return i(e.children,(r=>t.cloneElement(r,{onExited:n.bind(null,r),visible:!0,appear:l(r,"appear",e),enter:l(r,"enter",e),exit:l(r,"exit",e)})))}(e,b)),s.current=!1):d((t=>u(e,t,b))),()=>{f.current=!1})),[e]);const E=t.useMemo((()=>Object.values(a)),[a]);return null===o?E:r.default.createElement(o,{ref:n},E)}));e.TransitionGroup=o,Object.defineProperty(e,"__esModule",{value:!0})}));
